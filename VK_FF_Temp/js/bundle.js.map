{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/DnD.js","webpack:///./js/friendFilter.js","webpack:///./js/friendListBuilder.js","webpack:///./js/helpers.js","webpack:///./js/scripts.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;ACnEsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK,gFAAgF;AACrF,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA,yE;;;;;;;;;;;;;;ACxDmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAI;AACJ;;AAEA;AACA,uBAAuB,sBAAsB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;;AAEA,6E;;;;;;;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,iBAAiB;AAC9C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kF;;;;;;;;;;;;;;;ACvCA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;;AAEA;AACA;;AAEA;;;;;;;;;;;;;;;;;;AC3B+C;AAC/C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA,uCAAuC,oBAAoB;AAC3D,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA,yJAAgH;;AAEhH;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,YAAY;AACZ;AACA;;AAEA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;;AAEA;AACA,SAAS;AACT,KAAK","file":"./js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import {replaceFriend} from './helpers';\r\n\r\nclass DragDrop {\r\n\tconstructor (sourceList, targetList) {\r\n\t\tthis.sourceList = sourceList;\r\n\t\tthis.targetList = targetList;\r\n\t\tthis.sourceZone = sourceList.containerEl;\r\n\t\tthis.dropZone = targetList.containerEl;\r\n\t}\r\n\r\n\tinit () {\r\n\r\n\t\tlet zones = [\r\n\t\t\t\t{zone: this.sourceZone, sourceList: this.sourceList, targetList: this.targetList},\r\n\t\t\t\t{zone: this.dropZone, sourceList: this.targetList, targetList: this.sourceList}\r\n\t\t\t];\r\n\t\tlet currentDrag;\r\n\r\n\t\tfor (const zone of zones) {\r\n\t\t\tzone.zone.addEventListener('dragstart', (e) => {\r\n\t\t\t\tif (e.target.classList.contains('friend-list-item')) {\r\n\t\t\t\t\tcurrentDrag = {\r\n\t\t\t\t\t\tsource: zone.zone,\r\n\t\t\t\t\t\tsourceList: zone.sourceList,\r\n\t\t\t\t\t\ttargetList: zone.targetList,\r\n\t\t\t\t\t\tdata: JSON.stringify(e.target.dataset)\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tzone.zone.addEventListener('dragover', (e) => {\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tzone.zone.addEventListener('drop', (e) => {\r\n\t\t\t\tif (currentDrag) {\r\n\t\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (currentDrag.source !== zone.zone) {\r\n\t\t\t\t\t\tlet friendData = JSON.parse(currentDrag.data);\r\n\r\n\t\t\t\t\t\t//Обновляем списки друзей\r\n\t\t\t\t\t\treplaceFriend(currentDrag.sourceList, currentDrag.targetList, friendData);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tcurrentDrag = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default DragDrop;","import {isMatching} from './helpers';\r\n\r\nclass FilterValues {\r\n    constructor(options) {\r\n        this.el = options.el;\r\n        this.data = options.data;\r\n        this.fields = options.fields;\r\n        this.targetEl = options.targetEl;\r\n        this.template = options.template;\r\n    };\r\n\r\n    init() {\r\n        this.el.addEventListener('keyup', e => {\r\n            this.filter();\r\n        });\r\n    };\r\n\r\n    filter () {\r\n\t\tthis.targetEl.innerHTML = null;\r\n\r\n\t\tlet filterValue = this.el.value;\r\n\t\tlet filteredValues;\r\n\r\n\t\tif (!filterValue) {\r\n\t\t\tfilteredValues = this.data;\r\n\t\t} else {\r\n\t\t\tfilteredValues = this.data.filter(dataItem => {\r\n\t\t\t\tlet isFiltered = false;\r\n\r\n\t\t\t\tfor (const field of this.fields) {\r\n\t\t\t\t\tisFiltered = isMatching(dataItem[field], filterValue) || isFiltered;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn isFiltered;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst render = Handlebars.compile(this.template);\r\n\t\tconst html = render({items: filteredValues});\r\n\r\n\t\tthis.targetEl.innerHTML = html;\r\n    }\r\n\r\n    update(newData) {\r\n        this.data = newData;\r\n    }\r\n}\r\n\r\nexport default FilterValues;","import Filter from './friendFilter';\r\n\r\nclass FriendListBuilder {\r\n    constructor(data, templateEl, containerEl, filterOptions) {\r\n        this.data = data;\r\n        this.templateEl = templateEl;\r\n        this.containerEl = containerEl;\r\n        this.filter = new Filter({\r\n\t\t    el: filterOptions.el,\r\n\t\t    data: this.data,\r\n\t\t    fields: filterOptions.fields,\r\n\t\t    targetEl: this.containerEl,\r\n\t\t    template: this.templateEl,\r\n        });\r\n\r\n        this.filter.init();\r\n    };\r\n\r\n    render() {\r\n        if (!this.data) {\r\n            return;\r\n        }\r\n\r\n        const template = this.templateEl;\r\n        const render = Handlebars.compile(template);\r\n        const html = render({items: this.data});\r\n        const results = this.containerEl;\r\n\r\n        results.innerHTML = html;\r\n    };\r\n\r\n    updateData(newData) {\r\n        this.data = newData;\r\n        this.render();\r\n        this.filter.update(this.data);\r\n        this.filter.filter();\r\n    };\r\n}\r\n\r\nexport default FriendListBuilder;","//Функция фильтрации строк\r\nfunction isMatching(full, chunk) {\r\n\treturn (full.toUpperCase().indexOf(chunk.toUpperCase()) >= 0);\r\n}\r\n\r\n//Сортировка по имени друга\r\nfunction sortFriends (friendA, friendB) {\r\n\tif (friendA.first_name > friendB.first_name) {\r\n\t\treturn 1;\r\n\t}  else {\r\n\t\treturn -1;\r\n\t}\r\n}\r\n\r\n//Перенос данных о друге из одного списка в другой\r\nfunction replaceFriend (sourceList, targetList, friend) {\r\n\tsourceList.data = sourceList.data.filter(item => {\r\n\t\tif (item.id != friend.id) {\r\n\t\t\treturn item;\r\n\t\t}\r\n\t});\r\n\r\n\ttargetList.data.push(friend);\r\n\r\n\tsourceList.updateData(sourceList.data.sort(sortFriends));\r\n\ttargetList.updateData(targetList.data.sort(sortFriends));\r\n\r\n}\r\n\r\nexport {\r\n\tisMatching,\r\n\tsortFriends,\r\n\treplaceFriend\r\n}","import {isMatching, sortFriends, replaceFriend} from \"./helpers\";\r\nimport FriendListBuilder from './friendListBuilder';\r\nimport DragDrop from './DnD';\r\n\r\nlet friendsGlobal = [];\r\nlet friendsLocal = [];\r\n\r\nVK.init({\r\n    apiId: 6489428\r\n    }\r\n);\r\n\r\nfunction auth() {\r\n    return new Promise((resolve, reject) => {\r\n        VK.Auth.login(data => {\r\n            if (data.session) {\r\n                resolve();\r\n            } else {\r\n                reject(new Error(\"Not connected\"));\r\n            }\r\n        })\r\n    }, 2)\r\n}\r\n\r\nfunction callAPI(method, params) {\r\n    params.v = '5.76';\r\n\r\n    return new Promise((resolve, reject) => {\r\n        VK.api(method, params, (data) => {\r\n            if (data.error) {\r\n                reject(data.error);\r\n            } else {\r\n                resolve(data.response);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\nauth()\r\n    .then(() => {\r\n        return callAPI('friends.get', {fields: 'photo_100'})\r\n    })\r\n    .then(allFfriends => {\r\n        const templateFriend = document.querySelector('#user-template').textContent;\r\n        const templateLocalFriend = document.querySelector('#user-local-template').textContent;\r\n        const leftFriendList = document.querySelector('.friend-list.left-friend-list');\r\n        const rightFriendList = document.querySelector('.friend-list.right-friend-list');\r\n\r\n        friendsGlobal = allFfriends.items.sort(sortFriends);\r\n        friendsLocal = localStorage.friendsLocal ? JSON.parse(localStorage.friendsLocal).sort(sortFriends) : []; //Массив локальных друзей\r\n\r\n        //Если есть сохраненные друзья, фильтруем полученные данные, чтобы их исключить\r\n        if (friendsLocal.length > 0) {\r\n            friendsLocal.map(friend => {\r\n                friendsGlobal = friendsGlobal.filter(item => {\r\n                    return (item.id != friend.id);\r\n                })\r\n            })\r\n        }\r\n\r\n\t\t//Build friendLsts\r\n\t\tconst friendsGlobalFilterInput = document.querySelector('.friend-search-input');\r\n\t\tconst friendsGlobalFilterOPtions = {\r\n\t\t\tel: friendsGlobalFilterInput,\r\n\t\t\tfields: ['first_name', 'last_name']\r\n\t\t};\r\n\t\tconst friendsLocalFilterInput = document.querySelector('.friend-filter-input');\r\n\t\tconst friendsLocalFilterOPtions = {\r\n\t\t\tel: friendsLocalFilterInput,\r\n\t\t\tfields: ['first_name', 'last_name']\r\n\t\t};\r\n\r\n\t\tlet friendsGlobalList = new FriendListBuilder (friendsGlobal, templateFriend, leftFriendList, friendsGlobalFilterOPtions);\r\n\t\tlet friendsLocalList = new FriendListBuilder (friendsLocal, templateLocalFriend, rightFriendList, friendsLocalFilterOPtions);\r\n\r\n\t\tfriendsGlobalList.render();\r\n\t\tfriendsLocalList.render();\r\n\r\n\t\t//Drag-n-Drop\r\n\t\tlet friendsGlobalDragDrop = new DragDrop(friendsGlobalList, friendsLocalList);\r\n\r\n\t\tfriendsGlobalDragDrop.init();\r\n\r\n\t\t//Обработчик добавления друга кликом по кнопке + и удаления кликом по кнопке х\r\n        document.querySelector('.friend-list-wrapper').addEventListener('click', e => {\r\n           if (e.target.closest('.add-friend-button')) {\r\n               const friendItem = e.target.closest('.friend');\r\n               const friendDtata = friendItem.dataset;\r\n\r\n\t\t\t   replaceFriend(friendsGlobalList, friendsLocalList, friendDtata);\r\n\r\n           } else if (e.target.closest('.remove-friend-button')) {\r\n               const friendItem = e.target.closest('.friend');\r\n               const friendDtata = friendItem.dataset;\r\n\r\n\t\t\t   replaceFriend(friendsLocalList, friendsGlobalList, friendDtata);\r\n           }\r\n        });\r\n\r\n\t\t//Кнопка Сохранить\r\n        const saveButton = document.querySelector('.save-button');\r\n\r\n        saveButton.addEventListener('click', () => {\r\n            let dataToSave = JSON.stringify(friendsLocalList.data);\r\n\r\n            localStorage.setItem('friendsLocal', dataToSave);\r\n        })\r\n    });\r\n\r\n"],"sourceRoot":""}